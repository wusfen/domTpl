"use strict";var toArray=function(){try{[].slice.call(document.childNodes);return function(b){return[].slice.call(b);};}catch(a){return function(c){var b=[];
for(var d=0;d<c.length;d++){b.push(c[d]);}return b;};}}();function noop(){}if(!window.console){console={log:noop,warn:noop,info:noop,table:noop};}if(!Object.keys){Object.keys=function(c){var a=[];
for(var b in c){if(!c.hasOwnProperty(b)){continue;}a.push(b);}return a;};}var uidMap={};window.uidMap=uidMap;var uid=0;var canUidSetOnNode=function(){try{document.createTextNode("").uid=1;
return true;}catch(a){}}();function setNodeUid(d,e,a){if(!getNodeUid(d)){var c;if(!e){c=++uid;}else{a=a.pop?a:[a];c=e;for(var b=0;b<a.length;b++){c+="["+a[b]+"]";
}}uidMap[c]={uid:c,node:d};if(canUidSetOnNode){d.uid=c;}d.setAttribute&&d.setAttribute("uid",c);d.parentNode&&d.parentNode.insertBefore(document.createComment("uid:"+c),d);
}return c;}function getNodeUid(b){if(canUidSetOnNode){return b.uid;}else{for(var a in uidMap){if(b==uidMap[a].node){return a;}}}}function U(d,a){a=a||[];
var c=d;for(var b=0;b<a.length;b++){c+="["+a[b]+"]";}return c;}function compile(d){d=d||document.getElementsByTagName("html")[0];console.log("compile:",d);
if(d.render){return d.render;}var c="var $$ = arguments.callee\n";(function a(e,l,m){l=(l||[]).concat();m=m||1;if(e.nodeType==1){var k=e.getAttribute("if");
if(k){setNodeUid(e);c+="\n"+Array(m).join("  ")+"$$.IF( $$.U("+uid+", ["+l+"]), "+k+", function(){\n";f(e,l,m+1);c+=Array(m).join("  ")+"})\n";}var h=e.getAttribute("each");
if(h&&!e.cloneFor){setNodeUid(e);var n=h.split(" in ");var j=n[0];var g=n[1];var i="$i_"+uid;c+="\n"+Array(m).join("  ")+"$$.EACH( $$.U("+uid+", ["+l+"]), "+g+", function("+j+", $index, "+i+"){\n";
l.push(i);f(e,l,m+1);c+=Array(m).join("  ")+"})\n";}if(!k&&!h){f(e,l,m);}function f(s,t,p){var q=toArray(s.attributes);for(var r=0;r<q.length;r++){if(q[r].specified){a(q[r],t,p);
}}var u=toArray(s.childNodes);for(var r=0;r<u.length;r++){a(u[r],t,p);}}}else{if(e.nodeType==2||e.nodeType==3||e.nodeType==8){var o=(e.nodeValue||e.value||"")+"";
if(!o.match("{{")){return;}setNodeUid(e);c+=Array(m).join("  ")+"$$.V( $$.U("+uid+", ["+l+"]), "+parse(o)+")\n";}}})(d);c+='\nconsole.warn("debug")';var b=Function(c);
b.IF=IF;b.EACH=EACH;b.V=V;b.U=U;d.code=c;d.render=b;return b;}function parse(b,a){a=a||"'";return'"'+b.replace(/\r?\n/g,"").replace(/"/g,'\\"').replace(/{{(.*?)}}/g,'"+($1)+"')+'"';
}function setMark(b,a){var c=b.mark;if(!c){c=document.createComment("mark");b.parentNode.insertBefore(c,b);b.mark=c;c.node=b;a||b.parentNode.removeChild(b);
}return c;}function V(a,d){var e=uidMap[a]||{};var b=e.node||a.node||a;var c=e.value||b.value||b.nodeValue;if(d!=c){e.value=d;if(b.nodeType==2){b.value=d;
}else{if(b.nodeType==3){b.nodeValue=d;}}}}function IF(b,g,c){var f=uidMap[b]||{};var d=f.node||b.node||b;var a=g;var e=setMark(d,true);if(a){c&&c();d.parentNode||e.parentNode.insertBefore(d,e);
}else{d.parentNode&&d.parentNode.removeChild(d);}}function C(d,c){var b=d.cloneNode(true);(function a(g,f){if(g.nodeType==1){var m=g.getAttribute("if");
var k=g.getAttribute("each");if(m||k){setNodeUid(f,getNodeUid(g),c);}var h=toArray(g.attributes);var l=toArray(f.attributes);for(var j=0;j<h.length;j++){if(h[j].specified){a(h[j],l[j]);
}}var o=toArray(g.childNodes);var e=toArray(f.childNodes);for(var j=0;j<o.length;j++){a(o[j],e[j]);}}else{if(g.nodeType==2||g.nodeType==3||g.nodeType==8){var n=(g.nodeValue||g.value||"")+"";
if(!n.match("{{")){return;}setNodeUid(f,getNodeUid(g),c);}}})(d,b);return b;}function EACH(g,d,k){var o=uidMap[g]||{};var c=o.node||g.node||g;var h=d;var e=setMark(c,false);
var n=Object.keys(h);var j=c.cloneLength||0;var a=Math.max(j,n.length);for(var f=0;f<a;f++){var l=n[f];var m=h[l];var b=c["clone"+f];if(!b){b=C(c,f);b.cloneFor=c;
b.setAttribute("index",f);c["clone"+f]=b;console.log("cloneNode",b);}if(f>=j){b.parentNode||e.parentNode.insertBefore(b,e);}else{if(f<j&&f>=n.length){b.parentNode&&b.parentNode.removeChild(b);
}}f<n.length&&k&&k(m,l,f);}c.cloneLength=n.length;}function observe(d,c,b){b=arguments[arguments.length-1];c=arguments.length>2?c:d;for(var a in c){if(!d.hasOwnProperty(a)){continue;
}(function(){var e=a;var f=c[a];Object.defineProperty(d,a,{set:function(g){console.error("debug:","set",d,e,g);f=g;b();if(typeof g=="object"){observe(g,b);
}},get:function(){console.error("debug:","get",d,e,f);return f;}});if(typeof f=="object"){observe(f,b);}})();}}function v(a){a=a||{};var c=compile(a.node);
var b=a.data||{};b.$render=function(){c();};b.$set=function(d,e){observe(b,{key:e},c);};c();observe(b,function(){c();});return b;}window.compile=compile;
