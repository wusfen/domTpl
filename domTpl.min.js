/*!
 * https://github.com/wusfen/domTpl
 */
!function(e,n){function t(e){var n="var _$ = arguments.callee\n";!function a(e,t){function i(){if(!V){V=!0;for(var n=w(e.attributes),t=0;t<n.length;t++)n[t].specified&&a(n[t],e);for(var r=w(e.childNodes),t=0;t<r.length;t++)a(r[t])}}if(1!=e.nodeType||e.nid){if(2==e.nodeType||3==e.nodeType){var o=e.nodeValue+"",u=e.name+"",c=(u.match(/^(attr-|:|\.)(.*)/)||[])[2];if(c&&k(o,t)){T(t,u);var f=r(t);switch(c){case"class":n+=E()+"_$.class("+f+", "+x(o,"{}")+")\n";break;case"style":n+=E()+"_$.style("+f+", "+x(o,"{}")+")\n";break;default:n+=E()+"_$.attr("+f+', "'+c+'", '+x(o,'""')+", _data_)\n"}}if(o.match("{{")){var d=N(o);if(k(d,e)){var l=r(e);n+=E()+"_$.value("+l+", "+d+")\n"}}}}else{var l,v=T(e,"each");if(v){var l=l||r(e),s=v.split(" in ");n+=E(1)+"_$.each("+l+", "+x(s[1],"[]")+", function("+s[0]+", $index){\n",i()}var p=T(e,"if");if(k(p,e)){var l=l||r(e);n+=E(1)+"_$.if("+l+", "+x(p,"0")+", function(){\n",i(),n+=E(-1)+"})\n"}var h=T(e,"model");if(k(h,e)){var l=l||r(e),m=h.match(/(.+)\.(.+)/),y=m?"typeof "+m[1]+'=="object"?'+m[1]+":(_data_."+m[1]+"={})":"this[$index]==="+h+"?this:_data_",_=m?'"'+m[2]+'"':"this[$index]==="+h+'?$index:"'+h+'"';n+=E()+"_$.model("+l+", "+y+", "+_+", _data_)\n"}for(var g="input,abort,blur,change,click,dblclick,error,focus,keydown,keypress,keyup,load,mousedown,mousemove,mouseout,mouseover,mouseup,reset,resize,select,submit,unload".split(","),$=0;$<g.length;$++){var b=g[$],M=T(e,b);if(k(M,e)){var l=l||r(e);n+=E()+"_$.on("+l+', "'+b+'", function($this, $event){(function(){'+M+"}).apply(_data_)}, _data_)\n"}}var A=T(e,"text");if(k(A,e)){var l=l||r(e);n+=E()+"_$.text("+l+", "+x(A,'""')+")\n"}var L=T(e,"html");if(k(L,e)){var l=l||r(e);n+=E()+"_$.html("+l+", "+x(L,'""')+")\n"}v&&(n+=E(-1)+"})\n"),i();var V=!1}}(e);var t=Function("_data_","_data_=_data_||{}\n"+b(n)+n);return t.each=o,t["if"]=s,t.value=c,t.text=d,t.html=l,t.attr=v,t["class"]=y,t.style=_,t.on=g,t.model=$,A&&console.info("compile:",t),t}function r(e,n){var t=a(e);if(!n&&t)return t;if(n=n||++L,V[n]=e,1==e.nodeType)e.nid=n;else if(2==e.nodeType)e.nodeValue=n+":::";else if(3==e.nodeType){var r=e.parentNode,i=r.nidMap||(r.nidMap={});i[n]=e}return n}function a(e){if(1==e.nodeType)return e.nid;if(2==e.nodeType)return((e.nodeValue+"").match(/^([\d.]+):::$/)||[])[1];if(3==e.nodeType){var n=e.parentNode,t=n.nidMap||(n.nidMap={});for(var r in t)if(t[r]==e)return r}}function i(e){return V[e+o.ii]}function o(e,n,t){n=n||[];for(var r=i(e),a=m(r,"each"),c=o.ii,f=r.lastLength||0,d=n.length||0,l=0;d>l;l++){o.ii=c+"."+l;var v=i(e)||u(r,l);h(v,v.mark||a),t.call(n,n[l],l,n)}for(var l=d;f>l;l++){o.ii=c+"."+l;var v=i(e);p(v)}o.ii=c,r.lastLength=d}function u(e,n){var t=e.cloneNode(!0);return function i(e,t){var o=a(e);if(o&&r(t,o+"."+n),1==e.nodeType){for(var u=e.attributes,c=t.attributes,f=0;f<u.length;f++)u[f].specified&&i(u[f],c[f]);for(var d=e.childNodes,l=t.childNodes,f=0;f<d.length;f++)i(d[f],l[f])}}(e,t),t}function c(e,n){var t=i(e);t.nodeValue!=n&&(t.nodeValue=n)}function f(e){return F.nodeValue=e,C.innerHTML}function d(e,n){var t=i(e);t._text!=n&&(t.innerHTML=f(n),t._text=n)}function l(e,n){var t=i(e);t.innerHTML!=n&&(t.innerHTML=n)}function v(e,n,t){var r=i(e);r.setAttribute(n,t)}function s(e,n,t){var r=i(e),a=m(r,"if");n?(t&&t(),h(r,a)):p(r)}function p(e){var n=e.parentNode;n&&1==n.nodeType&&n.removeChild(e)}function h(e,n){var t=e.parentNode;n=n||e.mark,t&&1==t.nodeType||n.parentNode.insertBefore(e,n)}function m(e,t){var r=e.mark;return r||(r=n.createComment("domTpl:"+t+" "+a(e)),e.parentNode.insertBefore(r,e),e.mark=r,r.node=e,"each"==t&&p(e)),r}function y(e,n){function t(e){return a.match(RegExp("(^|\\s+)"+e+"(\\s+|$)"))}var r=i(e),a=r.className;for(var o in n){var u=n[o];u?t(o)||(r.className+=(a?" ":"")+o):t(o)&&(r.className=a.replace(RegExp("(^|\\s+)"+o+"(?=\\s+|$)","g"),""))}}function _(e,n){var t=i(e),r=t.style;for(var a in n){var o=a.replace(/(^|-)(.)/g,function(e,n,t){return t.toUpperCase()});r["webkit"+o]=r["moz"+o]=r["ms"+o]=r["o"+o]=r[a]=n[a]}}function g(e,n,t,r){function i(e){e=e||window.event;var t=e.target||e.srcElement;!function i(t){if(t){var o=a(t),u=H[n][o];u&&(u(t,e),r.$render()),i(t.parentNode)}}(t)}var e=e+o.ii;H[n]||(H[n]={},j(n,i),"model"==n&&(j("input",i),j("keyup",i),j("change",i))),H[n][e]=t}function $(e,n,t,r){var a=i(e),o=n[t];if(o!==a.value){var u="text"==a.type?a.selectionStart:0,c=u&&u<a.value.length;a.value=o||"",n[t]=a.value,a.value=n[t],n[t]=a.value,c&&(a.selectionStart=a.selectionEnd=u)}g(e,"model",function(){n[t]=a.value},r)}function w(e){for(var n=e.length,t=new Array(n);n--;)t[n]=e[n];return t}function T(e,n){var t=e.getAttribute(n);return A||e.removeAttribute(n),t}function b(e){for(var n=e.replace(/\s*\.\s*/,".").replace(/'[^\']*'|"[^\"]*"|\.[$\w]*/g,"").replace(/\b(if|else|switch|case|default|for|continue|do|while|break|function|arguments|return|new|this|instanceof|try|catch|finally|throw|typeof|in|delete|var|true|false|null|void|with)\b/g,"").match(/[$a-z_A-Z\u4E00-\u9FA5][$\w\u4E00-\u9FA5]*/g),t="",r={},a=0;a<n.length;a++){var i=n[a];r[i]||(t+="var "+i+"="+i+'||("'+i+'" in _data_?_data_.'+i+":window."+i+')||""\n',r[i]=1)}return t}function N(e){return'"'+e.replace(/\r?\n/g,"").replace(/(^|}}).*?({{|$)/g,function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}).replace(/{{(.*?)}}/g,'"+'+x("$1",'""')+'+"')+'"'}function k(e,n){if(e)try{return Function((e.match(/^\s*\{/)?"!":"")+e),!0}catch(t){A&&console.error("domTpl:",n.nodeValue||e,n,t)}}function x(e,n){return"(function(){try{return("+e+')||""}catch(e){return '+n+"}}())"}function E(e){var n=E.n||(E.n=1);return E.n+=e||0,Array(e>0?n:E.n).join("  ")}function M(e,n){for(var t in e)!function(){var r=e[t];"function"==typeof r&&(e[t]=function(){r.apply(e,arguments),n()},e[t].fn=r)}()}var A=location.search.match("debug"),L=0,V={};o.ii="";var C=n.createElement("div"),F=n.createTextNode("");C.appendChild(F);var H={},j=function(){return n.addEventListener?function(e,t){n.body.addEventListener(e,t,1)}:function(e,t){n.attachEvent("on"+e,function(){t(window.event)})}}(),z=function(e,r){e&&e.constructor==Object&&(r=e,e=0),r=r||{},e=e||n.body.parentNode;var a,i=t(e),o=0,u=function(e){e&&M(e,u),e=e||u.data,u.data=e;var n=new Date;n-41>o?(clearTimeout(a),o=n,i(e)):a=setTimeout(function(){i(e)},41)};return u.render=i,r.$render=u,r.$set=function(e){for(var n in e)r[n]=e[n];u()},u(r),setTimeout(u,9),r};z.nidMap=V,z.eventMap=H,"function"==typeof define?define(function(e,n,t){return t.exports=z}):e.domTpl=z}("undefined"!=typeof window?window:this,document);